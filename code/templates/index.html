{% extends "base.html" %}
{% block content %}
<section class="hero">
  <h2>ğŸ¬ Trouvez votre film parfait selon votre Ã©motion</h2>
  <p style="color: var(--muted); font-size: 1.1rem;">DÃ©crivez votre humeur, nous trouvons le film idÃ©al pour vous âœ¨</p>
  
  <!-- DÃ©tection d'Ã©motion par webcam -->
  <div class="emotion-detection">
    <button id="btn-webcam" class="btn-webcam">ğŸ“· DÃ©tecter mon Ã©motion (Webcam)</button>
    <div id="webcam-container" class="webcam-container hidden">
      <video id="video" autoplay playsinline></video>
      <canvas id="canvas" class="hidden"></canvas>
      <button id="btn-capture" class="btn-capture">Capturer</button>
      <p id="detected-emotion" class="detected-emotion"></p>
    </div>
    <input type="file" id="file-input" accept="image/*" class="hidden">
    <button id="btn-upload" class="btn-upload">ğŸ“ Uploader une image</button>
  </div>

  <form action="{{ url_for('search') }}" method="get" class="search-form" id="search-form">
    <div>
      <label for="titre">ğŸ¥ Titre de film (optionnel)</label>
      <input type="text" id="titre" name="titre" placeholder="Ex : Inception, Avatar, Interstellar...">
    </div>
    <div>
      <label for="emotion">ğŸ’­ Votre Ã©motion du moment</label>
      <select id="emotion" name="emotion">
        <option value="">Choisir une Ã©motionâ€¦</option>
        <option value="heureux">ğŸ˜Š Heureux - Je veux rire et sourire</option>
        <option value="triste">ğŸ˜¢ Triste - J'ai besoin de catharsis</option>
        <option value="stressÃ©">ğŸ˜° StressÃ© - Donnez-moi de l'adrÃ©naline</option>
        <option value="nostalgique">ğŸ¥° Nostalgique - Des souvenirs Ã©mouvants</option>
        <option value="ennuyÃ©">ğŸ˜‘ EnnuyÃ© - Quelque chose de captivant</option>
        <option value="colere">ğŸ˜  ColÃ¨re - Un film intense</option>
        <option value="peur">ğŸ˜¨ Peur - J'aime frissonner</option>
        <option value="surprise">ğŸ˜² Surprise - Ã‰tonnez-moi!</option>
      </select>
    </div>
    <button type="submit">ğŸ” Chercher / Recommander</button>
  </form>

  <!-- Lecteur audio pour son d'Ã©motion -->
  <audio id="emotion-sound" preload="auto"></audio>
</section>

<script src="{{ url_for('static', filename='js/emotion-detection.js') }}"></script>
<script src="{{ url_for('static', filename='js/sound-manager.js') }}"></script>
{% endblock %}
